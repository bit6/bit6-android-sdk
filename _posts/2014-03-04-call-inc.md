---
category: calling
title: 'Incoming Calls'
---

Bit6 SDK has a seamless integration with Android push notification systems for receiving incoming calls. The process of handling an incoming call consists of the following steps:

1. Incoming call push notification arrives to the device and is handled by Bit6 SDK.

2. SDK broadcasts `your.package.name.BIT6_INCOMING_CALL` intent.

3. The application code can handle this intent to present the incoming call information to the user allowing to answer or reject the call.

4. If the call is answered, SDK will notify the app to create or update its InCall UI via `your.package.name.BIT6_CALL_ADDED` intent. This is done in exactly the same way as for the outgoing calls.

Steps 2 and 3 can be implemented by either (a) re-using Bit6 UI Library components or (b) implementing own solution. Sample code is available in Bit6 samples repo.

Note that in the code below assumes that the incoming call UI is displayed as an Activity but it can be easily implemented as a View or a Fragment.


### (a) Use Bit6 UI Library

Add the following items to your `Manifest.xml`:

```xml
<!-- Register a receiver that will launch the Incoming Call Activity -->
<receiver android:name="com.bit6.ui.IncomingCallReceiver" android:enabled="true">
    <intent-filter>
        <action android:name="your.package.name.BIT6_INCOMING_CALL" />
    </intent-filter>
</receiver>

<!-- Display basic incoming call information with 'answer' and 'reject' buttons -->
<activity android:name="com.bit6.ui.IncomingCallActivity"
    android:launchMode="singleTop"
    android:theme="@style/Theme.AppCompat.NoActionBar" />
```


### (b) Custom Incoming Call UI

**Step 1.** Implement `BroadcastReceiver` to handle incoming call intents.

```java
public class IncomingCallReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Intent i = new Intent(context, IncomingCallActivity.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        // Send Call information to the IncomingCallActivity
        i.putExtras(intent);
        context.startActivity(i);
    }
}
```

Register it in `Manifest.xml` or in the app code.

```java
<receiver android:name=".IncomingCallReceiver" android:enabled="true">
    <intent-filter>
        <action android:name="your.package.name.BIT6_INCOMING_CALL" />
    </intent-filter>
</receiver>
```


**Step 2.** Implement Incoming Call UI

You can see the full source code of `IncomingCallActivity` in the samples repo. The information below highlights the key points:

Get call controller and display UI for answering / rejecting a call

```java
// Get RtcDialog (call controller) for this call
RtcDialog dialog = callClient.getDialogFromIntent(getIntent());
dialog.addStateListener(this);

// Get caller identity
String caller = dialog.getOther();
// Is this a Video call
boolean video = dialog.hasVideo();
```

Implement `RtcDialog.StateListener` to receive call state changes - if the caller hangs up the call before the user had a chance to answer or reject it.

```java
@Override
public void onStateChanged(RtcDialog d, int state) {
    if (state == RtcDialog.END) {
        // TODO: Close the Incoming Call UI
    }
}
```

**Step 3.a.** Reject a call

If the user clicks on a Reject button in the UI, you can decline the incoming call request.

```java
// Reject / hangup this call
dialog.hangup();
```

**Step 3.b.** Accept the call and show In-Call UI

If the user accepts the call:

```java
// Answer the call
dialog.answer();
// TODO: Close the Incoming Call UI
```

Once the call is accepted and Bit6 SDK processes that, it will broadcast the usual `your.package.name.BIT6_CALL_ADDED` intent.
