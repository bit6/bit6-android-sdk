---
category: messaging
title: 'Messages'
---

Bit6 messaging capabilities are accessed via `MessageClient`.

```java
MessageClient messageClient = bit6.getMessageClient();
```

### Send a Text Message

```java
Address to = Address.parse("usr:john");
messageClient.compose(to).text("Hello!").send(statusListener);
```

To follow the message progress as it is being sent implement `MessageStatusListener`.

```java

public void onMessageStatusChanged(Message m, int state) {
    switch(state) {
        case Message.STATUS_SENDING:
            break;
        case Message.STATUS_FAILED:
            break;
    }
}
```

### Delete a Message

To delete a message you need its `_id` value, usually retrived from a cursor.

```java
String msgId = cursor.getString(cursor.getColumnIndex(Contract.Messages._ID));
messageClient.deleteMessage(messageId, new ResultHandler() {
    public void onResult(boolean success, String msg) {}
});
```

### Message Details

Message `flags` contain information about the message type and status:

```java
int flags = cursor.getInt(cursor.getColumnIndex(Messages.FLAGS));
// Is this an incoming message?
boolean isIncoming = Message.isIncoming(flags)
// Get message type: Message.TYPE_TEXT, Message.TYPE_ATTACH etc
int type = Message.getType(flags);
// Get message status: Message.STATUS_SENT, Message.STATUS_DELIVERED
int status = Message.getType(flags);
```

### Incoming Message Notification

To get notified about new incoming messages even when your app is not in the foreground:

**Step 1.** Register Broadcast Receiver for `your.package.name.BIT6_INCOMING_MESSAGE` intent in your Manifest.xml

```java
<receiver android:name=".IncomingMessageReceiver" android:enabled="true">
    <intent-filter>
        <action android:name="your.package.name.BIT6_INCOMING_MESSAGE"></action>
    </intent-filter>
</receiver>
```

**Step 2.** Create a receiver class which extends BroadcastReceiver.

```java
public class IncomingMessageReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getExtras() != null){
            String content = intent.getStringExtra(Bit6.INTENT_EXTRA_CONTENT);
            String senderName = intent.getStringExtra(Bit6.INTENT_EXTRA_NAME);
        }
    }
}
```
