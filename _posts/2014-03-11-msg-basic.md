---
category: messaging
title: 'Text Messages'
---


### Send Text Message

```java
String content = "This is a text message";
Address to = Address.parse(destination);
Message m =  Message.newMessage(to).text(content);
bit6.getMessageClient().sendMessage(m, statusListener);
```

To follow the message progress as it is being sent implement `MessageStatusListener`.

```java

public void onMessageStatusChanged(Message m, int state) {
    if (state == Message.STATUS_SENDING) {

    } else if (state == Message.STATUS_FAILED) {

    }
}
```

### Delete a Message

```java
bit6.getMessageClient().deleteMessage(messageId, new ResultHandler() {
    public void onResult(boolean success, String msg) {}
});
```

### Get Conversations

```java
Cursor cursor = bit6.getMessageClient().getConversations();
```

### Get Messages in a Conversation

```java
Cursor cursor = bit6.getMessageClient().getConversation(destination);
```

### Message Details

Message `flags` contain infomration about the message type and status:

```java
int flags = cursor.getInt(cursor.getColumnIndex(Messages.FLAGS));
// Is this an incoming message?
boolean isIncoming = Message.isIncoming(flags)
// Get message type: Message.TYPE_TEXT, Message.TYPE_ATTACH etc
int type = Message.getType(flags);
// Get message status: Message.STATUS_SENT, Message.STATUS_DELIVERED
int status = Message.getType(flags);
```

### Incoming Messages

To get notified about new incoming messages even when your app is not in the foreground:

**Step 1.** Register Broadcast Receiver for `your.package.name.BIT6_INCOMING_MESSAGE` intent in your Manifest.xml

```java
<receiver android:name=".IncomingMessageReceiver" android:enabled="true">
    <intent-filter>
        <action android:name="your.package.name.BIT6_INCOMING_MESSAGE"></action>
    </intent-filter>
</receiver>
```

**Step 2.** Create a receiver class which extends BroadcastReceiver.

```java
public class IncomingMessageReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if(intent.getExtras() != null){
            String content = intent.getStringExtra(Bit6.INTENT_EXTRA_CONTENT);
            String senderName = intent.getStringExtra(Bit6.INTENT_EXTRA_NAME);
        }
    }
}
```

